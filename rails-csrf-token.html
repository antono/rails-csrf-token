<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../core-ajax/core-ajax.html">

<!--
Element providing solution to no problem in particular.

##### Example

    <rails-csrf-token></rails-csrf-token>

@element rails-csrf-token
@blurb Element providing CSRF token for rails based applications.
@status alpha
@homepage http://antono.github.io/rails-csrf-token
-->

<polymer-element name="rails-csrf-token" attributes="token url">
  <template>
    <core-ajax auto url="{{ url }}" handleAs="json" on-core-response="{{ handleResponse }}"></core-ajax>
  </template>
  <script>
    Polymer({
      token: null,
      url: '/api/bootstrap',
      handleResponse: function(ev, obj) {
        if (obj.token) {
          this.token = obj.token;
        }
      }
    })
  </script>
</polymer-element>
